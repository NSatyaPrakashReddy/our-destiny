<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Destiny - A Love Story</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&amp;family=Great+Vibes&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .font-script {
      font-family: 'Great Vibes', cursive;
    }
    
    .font-elegant {
      font-family: 'Cormorant Garamond', serif;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { filter: drop-shadow(0 0 10px rgba(255, 182, 193, 0.5)); }
      50% { filter: drop-shadow(0 0 25px rgba(255, 182, 193, 0.8)); }
    }
    
    @keyframes slide-in {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fade-in-scale {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    
    @keyframes heart-beat {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.1); }
      50% { transform: scale(1); }
      75% { transform: scale(1.05); }
    }
    
    .animate-float {
      animation: float 6s ease-in-out infinite;
    }
    
    .animate-sparkle {
      animation: sparkle 2s ease-in-out infinite;
    }
    
    .animate-pulse-glow {
      animation: pulse-glow 3s ease-in-out infinite;
    }
    
    .animate-slide-in {
      animation: slide-in 1s ease-out forwards;
    }
    
    .animate-fade-scale {
      animation: fade-in-scale 1.2s ease-out forwards;
    }
    
    .animate-heartbeat {
      animation: heart-beat 1.5s ease-in-out infinite;
    }
    
    .photo-frame {
      background: linear-gradient(135deg, #fff9f9 0%, #fff0f3 100%);
      box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.15),
        inset 0 0 0 8px rgba(255, 255, 255, 0.9),
        inset 0 0 0 10px rgba(199, 144, 129, 0.3);
    }
    
    .photo-placeholder {
      background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 50%, #fbcfe8 100%);
      position: relative;
      overflow: hidden;
    }
    
    .photo-placeholder::before {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.4) 0%, transparent 50%),
        radial-gradient(circle at 70% 60%, rgba(244, 114, 182, 0.1) 0%, transparent 40%);
    }
    
    .star {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
    }
    
    .constellation-line {
      stroke: rgba(255, 255, 255, 0.3);
      stroke-width: 1;
      stroke-dasharray: 5, 5;
    }
    
    .slide {
      opacity: 0;
      transform: scale(0.95);
      transition: all 1s ease-out;
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    
    .slide.active {
      opacity: 1;
      transform: scale(1);
      pointer-events: auto;
    }
    
    .progress-dot {
      transition: all 0.3s ease;
    }
    
    .progress-dot.active {
      transform: scale(1.3);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-elegant">
  <div id="app" class="h-full w-full overflow-hidden relative"><!-- Animated Background -->
   <div id="background" class="absolute inset-0 transition-all duration-1000"><!-- Stars -->
    <div id="stars-container" class="absolute inset-0 overflow-hidden"></div><!-- Floating Hearts -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
     <svg class="absolute animate-float" style="top: 10%; left: 5%; animation-delay: 0s;" width="40" height="40" viewbox="0 0 24 24" fill="rgba(244, 114, 182, 0.4)"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
     </svg>
     <svg class="absolute animate-float" style="top: 20%; right: 10%; animation-delay: 1s;" width="30" height="30" viewbox="0 0 24 24" fill="rgba(251, 207, 232, 0.5)"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
     </svg>
     <svg class="absolute animate-float" style="bottom: 30%; left: 8%; animation-delay: 2s;" width="25" height="25" viewbox="0 0 24 24" fill="rgba(244, 114, 182, 0.3)"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
     </svg>
     <svg class="absolute animate-float" style="bottom: 15%; right: 15%; animation-delay: 3s;" width="35" height="35" viewbox="0 0 24 24" fill="rgba(251, 207, 232, 0.4)"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
     </svg>
    </div><!-- Sparkles -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
     <div class="star animate-sparkle" style="top: 15%; left: 20%; animation-delay: 0s;"></div>
     <div class="star animate-sparkle" style="top: 25%; right: 25%; animation-delay: 0.5s;"></div>
     <div class="star animate-sparkle" style="top: 45%; left: 15%; animation-delay: 1s;"></div>
     <div class="star animate-sparkle" style="top: 60%; right: 20%; animation-delay: 1.5s;"></div>
     <div class="star animate-sparkle" style="bottom: 25%; left: 30%; animation-delay: 2s;"></div>
     <div class="star animate-sparkle" style="bottom: 35%; right: 30%; animation-delay: 2.5s;"></div>
    </div>
   </div><!-- Slide 0: Opening -->
   <div class="slide active" data-slide="0">
    <div class="h-full w-full flex flex-col items-center justify-center p-8 relative"><!-- Constellation SVG -->
     <svg class="absolute inset-0 w-full h-full opacity-30" viewbox="0 0 100 100" preserveaspectratio="none"><line class="constellation-line" x1="20" y1="20" x2="35" y2="35" /> <line class="constellation-line" x1="35" y1="35" x2="50" y2="25" /> <line class="constellation-line" x1="50" y1="25" x2="65" y2="40" /> <line class="constellation-line" x1="65" y1="40" x2="80" y2="30" /> <line class="constellation-line" x1="30" y1="60" x2="50" y2="70" /> <line class="constellation-line" x1="50" y1="70" x2="70" y2="65" />
     </svg>
     <div class="text-center z-10">
      <div class="animate-pulse-glow mb-6">
       <svg class="w-20 h-20 mx-auto animate-heartbeat" viewbox="0 0 24 24" fill="currentColor" id="opening-heart"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
       </svg>
      </div>
      <h1 id="main-title" class="font-script text-6xl md:text-8xl mb-4 animate-slide-in" style="animation-delay: 0.3s;">Our Destiny</h1>
      <p id="subtitle" class="text-xl md:text-2xl tracking-widest uppercase opacity-80 animate-slide-in" style="animation-delay: 0.6s;">A Love Written in the Stars</p>
      <div class="mt-12 animate-slide-in" style="animation-delay: 0.9s;">
       <p class="text-lg opacity-70 italic">"Some love stories are destiny..."</p>
      </div>
     </div><button onclick="nextSlide()" class="absolute bottom-12 animate-bounce z-10">
      <svg class="w-10 h-10 opacity-70" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
      </svg></button>
    </div>
   </div><!-- Slide 1: Photo 1 -->
   <div class="slide" data-slide="1">
    <div class="h-full w-full flex flex-col items-center justify-center p-6 md:p-12">
     <div class="photo-frame p-4 md:p-6 rounded-lg transform rotate-1 hover:rotate-0 transition-transform duration-500 max-w-md w-full animate-fade-scale">
      <div class="photo-placeholder aspect-[4/3] rounded flex items-center justify-center">
      <img src="./Images/Photo1.jpeg" alt="Photo 1" class="absolute inset-0 w-full h-full object-cover" />
       <div class="text-center p-6">
        
        </svg>
        
       </div>
      </div>
     </div>
     <div class="mt-8 text-center max-w-lg animate-slide-in" style="animation-delay: 0.3s;">
      <p id="message-1" class="text-xl md:text-2xl italic leading-relaxed">The moment our paths crossed, the universe smiled...</p>
      <div class="mt-4 flex items-center justify-center gap-2 opacity-60"><span class="w-8 h-px bg-current"></span>
       <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
       </svg><span class="w-8 h-px bg-current"></span>
      </div>
     </div>
    </div>
   </div><!-- Slide 2: Photo 2 -->
   <div class="slide" data-slide="2">
    <div class="h-full w-full flex flex-col items-center justify-center p-6 md:p-12">
     <div class="photo-frame p-4 md:p-6 rounded-lg transform -rotate-2 hover:rotate-0 transition-transform duration-500 max-w-md w-full animate-fade-scale">
      <div class="photo-placeholder aspect-[4/3] rounded flex items-center justify-center">
        <img src="./Images/Photo2.jpeg" alt="Photo 2" class="absolute inset-0 w-full h-full object-cover" />
       <div class="text-center p-6">
        
       </div>
      </div>
     </div>
     <div class="mt-8 text-center max-w-lg animate-slide-in" style="animation-delay: 0.3s;">
      <p id="message-2" class="text-xl md:text-2xl italic leading-relaxed">Every second with you is magic I never want to end...</p>
      <div class="mt-4 flex items-center justify-center gap-2 opacity-60"><span class="w-8 h-px bg-current"></span>
       <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
       </svg><span class="w-8 h-px bg-current"></span>
      </div>
     </div>
    </div>
   </div><!-- Slide 3: Photo 3 -->
   <div class="slide" data-slide="3">
    <div class="h-full w-full flex flex-col items-center justify-center p-6 md:p-12">
     <div class="photo-frame p-4 md:p-6 rounded-lg transform rotate-1 hover:rotate-0 transition-transform duration-500 max-w-md w-full animate-fade-scale">
      <div class="photo-placeholder aspect-[4/3] rounded flex items-center justify-center">
        <img src="./Images/Photo4.jpeg" alt="Photo 3" class="absolute inset-0 w-full h-full object-cover" />
       <div class="text-center p-6">
        
       </div>
      </div>
     </div>
     <div class="mt-8 text-center max-w-lg animate-slide-in" style="animation-delay: 0.3s;">
      <p id="message-3" class="text-xl md:text-2xl italic leading-relaxed">You are my forever, my always, my everything...</p>
      <div class="mt-4 flex items-center justify-center gap-2 opacity-60"><span class="w-8 h-px bg-current"></span>
       <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
       </svg><span class="w-8 h-px bg-current"></span>
      </div>
     </div>
    </div>
   </div><!-- Slide 4: Birthday Wish -->
   <div class="slide" data-slide="4">
    <div class="h-full w-full flex flex-col items-center justify-center p-6 md:p-12">
     <div class="photo-frame p-4 md:p-6 rounded-lg transform -rotate-1 hover:rotate-0 transition-transform duration-500 max-w-md w-full animate-fade-scale">
      <div class="photo-placeholder aspect-[4/3] rounded flex items-center justify-center">
        <img src="./Images/Photo5.jpeg" alt="Photo 5" class="absolute inset-0 w-full h-full object-cover" />
       <div class="text-center p-6">
        
       </div>
      </div>
     </div>
     <div class="mt-8 text-center max-w-lg animate-slide-in" style="animation-delay: 0.3s;">
      <p id="message-4" class="text-xl md:text-2xl italic leading-relaxed">Happy Birthday, my love. You make every day feel like a celebration...</p>
      <div class="mt-4 flex items-center justify-center gap-2 opacity-60"><span class="w-8 h-px bg-current"></span> <span class="text-2xl">ðŸŽ‚</span> <span class="w-8 h-px bg-current"></span>
      </div>
     </div>
    </div>
   </div><!-- Slide 5: Final Message -->
   <div class="slide" data-slide="5">
    <div class="h-full w-full flex flex-col items-center justify-center p-8 relative"><!-- Big Heart Animation -->
     <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
      <svg class="w-64 h-64 md:w-96 md:h-96 opacity-10 animate-pulse-glow" viewbox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
      </svg>
     </div>
     <div class="text-center z-10 max-w-2xl">
      <div class="animate-heartbeat mb-8">
       <svg class="w-16 h-16 mx-auto" viewbox="0 0 24 24" fill="currentColor" id="final-heart"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
       </svg>
      </div>
      <h2 class="font-script text-5xl md:text-7xl mb-6 animate-slide-in">Forever Yours</h2>
      <p id="final-message" class="text-xl md:text-2xl leading-relaxed mb-8 animate-slide-in" style="animation-delay: 0.3s;">From the first moment to forever, you are my destiny. Thank you for choosing me. Happy Birthday, my love. âœ¨</p>
      <div class="animate-slide-in" style="animation-delay: 0.6s;">
       <p class="font-script text-3xl md:text-4xl opacity-80">With all my love</p>
       <p class="font-script text-3xl md:text-4xl opacity-80">Your's SP</p>
      </div>
     </div><button onclick="restartSlideshow()" class="absolute bottom-12 flex items-center gap-2 opacity-70 hover:opacity-100 transition-opacity z-10">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
      </svg><span class="text-sm tracking-wider uppercase">Replay</span> </button>
    </div>
   </div><!-- Navigation -->
   <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex items-center gap-6 z-20"><button onclick="prevSlide()" class="p-2 rounded-full opacity-70 hover:opacity-100 transition-all" id="prev-btn">
     <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
     </svg></button>
    <div class="flex items-center gap-3" id="progress-dots"><button onclick="goToSlide(0)" class="progress-dot w-2 h-2 rounded-full transition-all active" data-dot="0"></button> <button onclick="goToSlide(1)" class="progress-dot w-2 h-2 rounded-full transition-all" data-dot="1"></button> <button onclick="goToSlide(2)" class="progress-dot w-2 h-2 rounded-full transition-all" data-dot="2"></button> <button onclick="goToSlide(3)" class="progress-dot w-2 h-2 rounded-full transition-all" data-dot="3"></button> <button onclick="goToSlide(4)" class="progress-dot w-2 h-2 rounded-full transition-all" data-dot="4"></button> <button onclick="goToSlide(5)" class="progress-dot w-2 h-2 rounded-full transition-all" data-dot="5"></button>
    </div><button onclick="nextSlide()" class="p-2 rounded-full opacity-70 hover:opacity-100 transition-all" id="next-btn">
     <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
     </svg></button>
   </div><!-- Auto-play toggle --> <button onclick="toggleAutoplay()" class="absolute top-6 right-6 p-3 rounded-full opacity-70 hover:opacity-100 transition-all z-20" id="autoplay-btn" title="Toggle autoplay">
    <svg id="play-icon" class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24"><path d="M8 5v14l11-7z" />
    </svg>
    <svg id="pause-icon" class="w-5 h-5 hidden" fill="currentColor" viewbox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
    </svg></button>
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      main_title: 'Our Destiny',
      subtitle: 'A Love Written in the Stars',
      message_1: 'The moment our paths crossed, the universe smiled...',
      message_2: 'Every second with you is magic I never want to end...',
      message_3: 'You are my forever, my always, my everything...',
      message_4: 'Happy Birthday, my dear Hariammaâ¤ï¸. You make every day feel like a celebration...',
      final_message: 'From the first moment to forever, you are my destiny. Thank you for choosing me. Happy Birthday, my love. âœ¨',
      background_color: '#1a1a2e',
      accent_color: '#f472b6',
      text_color: '#fdf2f8',
      secondary_color: '#c79081',
      highlight_color: '#fbcfe8',
      font_family: 'Cormorant Garamond',
      font_size: 16
    };

    let currentSlide = 0;
    const totalSlides = 6;
    let autoplayInterval = null;
    let isAutoplaying = false;

    // Slideshow functions
    function goToSlide(index) {
      const slides = document.querySelectorAll('.slide');
      const dots = document.querySelectorAll('.progress-dot');
      
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });
      
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
      
      currentSlide = index;
    }

    function nextSlide() {
      const next = (currentSlide + 1) % totalSlides;
      goToSlide(next);
    }

    function prevSlide() {
      const prev = (currentSlide - 1 + totalSlides) % totalSlides;
      goToSlide(prev);
    }

    function restartSlideshow() {
      goToSlide(0);
    }

    function toggleAutoplay() {
      const playIcon = document.getElementById('play-icon');
      const pauseIcon = document.getElementById('pause-icon');
      
      if (isAutoplaying) {
        clearInterval(autoplayInterval);
        autoplayInterval = null;
        isAutoplaying = false;
        playIcon.classList.remove('hidden');
        pauseIcon.classList.add('hidden');
      } else {
        autoplayInterval = setInterval(nextSlide, 5000);
        isAutoplaying = true;
        playIcon.classList.add('hidden');
        pauseIcon.classList.remove('hidden');
      }
    }

    // Create twinkling stars
    function createStars() {
      const container = document.getElementById('stars-container');
      container.innerHTML = '';
      for (let i = 0; i < 50; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 3}s`;
        star.style.animation = `sparkle ${2 + Math.random() * 2}s ease-in-out infinite`;
        container.appendChild(star);
      }
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight' || e.key === ' ') {
        nextSlide();
      } else if (e.key === 'ArrowLeft') {
        prevSlide();
      }
    });

    // Apply configuration to UI
    async function onConfigChange(config) {
      const bgColor = config.background_color || defaultConfig.background_color;
      const accentColor = config.accent_color || defaultConfig.accent_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      const highlightColor = config.highlight_color || defaultConfig.highlight_color;
      const fontFamily = config.font_family || defaultConfig.font_family;
      const baseFontSize = config.font_size || defaultConfig.font_size;

      // Apply background
      const bg = document.getElementById('background');
      bg.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${adjustColor(bgColor, 20)} 50%, ${adjustColor(bgColor, -10)} 100%)`;

      // Apply text color to app
      const app = document.getElementById('app');
      app.style.color = textColor;

      // Apply accent colors to hearts
      document.getElementById('opening-heart').style.fill = accentColor;
      document.getElementById('final-heart').style.fill = accentColor;

      // Apply to navigation elements
      const dots = document.querySelectorAll('.progress-dot');
      dots.forEach(dot => {
        dot.style.backgroundColor = dot.classList.contains('active') ? accentColor : `${accentColor}50`;
      });

      const navBtns = [document.getElementById('prev-btn'), document.getElementById('next-btn'), document.getElementById('autoplay-btn')];
      navBtns.forEach(btn => {
        if (btn) {
          btn.style.backgroundColor = `${secondaryColor}30`;
          btn.style.color = textColor;
        }
      });

      // Apply font
      const fontStack = `${fontFamily}, 'Cormorant Garamond', serif`;
      document.body.style.fontFamily = fontStack;

      // Apply font sizes proportionally
      const mainTitle = document.getElementById('main-title');
      const subtitle = document.getElementById('subtitle');
      const messages = [
        document.getElementById('message-1'),
        document.getElementById('message-2'),
        document.getElementById('message-3'),
        document.getElementById('message-4'),
        document.getElementById('final-message')
      ];

      if (mainTitle) mainTitle.style.fontSize = `${baseFontSize * 4}px`;
      if (subtitle) subtitle.style.fontSize = `${baseFontSize * 1.25}px`;
      messages.forEach(msg => {
        if (msg) msg.style.fontSize = `${baseFontSize * 1.5}px`;
      });

      // Update text content
      if (mainTitle) mainTitle.textContent = config.main_title || defaultConfig.main_title;
      if (subtitle) subtitle.textContent = config.subtitle || defaultConfig.subtitle;
      
      const msg1 = document.getElementById('message-1');
      const msg2 = document.getElementById('message-2');
      const msg3 = document.getElementById('message-3');
      const msg4 = document.getElementById('message-4');
      const finalMsg = document.getElementById('final-message');
      
      if (msg1) msg1.textContent = config.message_1 || defaultConfig.message_1;
      if (msg2) msg2.textContent = config.message_2 || defaultConfig.message_2;
      if (msg3) msg3.textContent = config.message_3 || defaultConfig.message_3;
      if (msg4) msg4.textContent = config.message_4 || defaultConfig.message_4;
      if (finalMsg) finalMsg.textContent = config.final_message || defaultConfig.final_message;
    }

    // Helper function to adjust colors
    function adjustColor(hex, amount) {
      const num = parseInt(hex.replace('#', ''), 16);
      const r = Math.min(255, Math.max(0, (num >> 16) + amount));
      const g = Math.min(255, Math.max(0, ((num >> 8) & 0x00FF) + amount));
      const b = Math.min(255, Math.max(0, (num & 0x0000FF) + amount));
      return `#${(1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1)}`;
    }

    // Map config to capabilities
    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => { config.secondary_color = value; window.elementSdk.setConfig({ secondary_color: value }); }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); }
          },
          {
            get: () => config.highlight_color || defaultConfig.highlight_color,
            set: (value) => { config.highlight_color = value; window.elementSdk.setConfig({ highlight_color: value }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => { config.font_family = value; window.elementSdk.setConfig({ font_family: value }); }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => { config.font_size = value; window.elementSdk.setConfig({ font_size: value }); }
        }
      };
    }

    // Map config to edit panel values
    function mapToEditPanelValues(config) {
      return new Map([
        ['main_title', config.main_title || defaultConfig.main_title],
        ['subtitle', config.subtitle || defaultConfig.subtitle],
        ['message_1', config.message_1 || defaultConfig.message_1],
        ['message_2', config.message_2 || defaultConfig.message_2],
        ['message_3', config.message_3 || defaultConfig.message_3],
        ['message_4', config.message_4 || defaultConfig.message_4],
        ['final_message', config.final_message || defaultConfig.final_message]
      ]);
    }

    // Initialize
    createStars();
    
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    } else {
      onConfigChange(defaultConfig);
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c981f0c61f3e867',t:'MTc3MDM1NDQxOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>